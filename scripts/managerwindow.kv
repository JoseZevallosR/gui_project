#:import Factory kivy.factory.Factory

MenuManager:
	ModelWindow:
	MeshWindow:
	
<ModelWindow>:
	name: "first"

	BoxLayout:
		padding : 10

		orientation : 'vertical'
		size : root.width , root.height

		Image:
			source: '../img/regional_model.PNG'
		GridLayout:
			cols : 2
			row_force_default: True
			row_default_height: 30
			Label:
				text: "Model Name"

			TextInput:

			Label:
				text: "EPCG"

			TextInput:

			Label:
				text: "Time Unit"

			TextInput:

			Label:
				text: "Starting Date"

			TextInput:

		Button:
			text: "Create"

		Button:
			text: "Mesh"
			on_release: 
				app.root.current = "second"
				root.manager.transition.direction = "left"

<MyPopup@Popup>
	auto_dismiss: False
	title: "Load file"
	BoxLayout:
		orientation: 'vertical'
		FileChooserListView:
			id: filechooser
			on_selection: mesh_widget.selected(filechooser.selection)
		Button:
			text: "select file"
			on_release: root.dismiss()

<LoadDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Load"
                on_release: root.load(filechooser.path, filechooser.selection)

<MeshWindow>:
	name: "second"

	BoxLayout:
		orientation: "vertical"
		size : root.width , root.height

		GridLayout:
			cols : 3
			row_force_default: True
			row_default_height: 30

			Label:
				text: "Limit Layer"
			TextInput:
				id: limit_layer
			Button:
				text:"Load"
				on_release: root.show_load()

			Label:
				text: "Wells"
			TextInput:
			Button:
				text:"Load"

			Label:
				text: "Rivers"
			TextInput:
			Button:
				text:"Load"

			Label:
				text: "Drains"
			TextInput:
			Button:
				text:"Load"


		Button:
			text: "Generate Mesh"

		Button:
			text: "Save"
		Button:
			text: "Model"
			on_release: 
				app.root.current = "first"
				root.manager.transition.direction = "right"